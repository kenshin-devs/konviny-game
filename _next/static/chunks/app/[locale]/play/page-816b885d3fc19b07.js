(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20],{128:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{bindSnapshot:function(){return s},createAsyncLocalStorage:function(){return r},createSnapshot:function(){return o}});let a=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class n{disable(){throw a}getStore(){}run(){throw a}exit(){throw a}enterWith(){throw a}static bind(e){return e}}let l="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function r(){return l?new l:new n}function s(e){return l?l.bind(e):n.bind(e)}function o(){return l?l.snapshot():function(e,...t){return e(...t)}}},1253:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return n.workAsyncStorageInstance}});let n=a(3342)},2292:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let n=a(8765),l=a(9401),r=a(6835);function s(e){return{default:e&&"default"in e?e.default:e}}a(3086);let o={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},i=function(e){let t={...o,...e},a=(0,l.lazy)(()=>t.loader().then(s)),i=t.loading;function d(e){let s=i?(0,n.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,d=o?l.Suspense:l.Fragment,c=t.ssr?(0,n.jsxs)(n.Fragment,{children:[null,(0,n.jsx)(a,{...e})]}):(0,n.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(a,{...e})});return(0,n.jsx)(d,{...o?{fallback:s}:{},children:c})}return d.displayName="LoadableComponent",d}},2449:(e,t,a)=>{"use strict";a.d(t,{C:()=>L});var n,l,r=a(9401),s={classic:{key:"classic",label:"Classic",description:"Standard 10x20 arena",width:10,height:20,baseDropIntervalMs:760},wide:{key:"wide",label:"Wide Rush",description:"Unusual 16x10 wide arena",width:16,height:10,baseDropIntervalMs:620}},o={I:"#22d3ee",O:"#facc15",T:"#c084fc",S:"#4ade80",Z:"#fb7185",J:"#60a5fa",L:"#fb923c"},i=["I","O","T","S","Z","J","L"],d={I:[[[0,1],[1,1],[2,1],[3,1]],[[2,0],[2,1],[2,2],[2,3]]],O:[[[1,0],[2,0],[1,1],[2,1]]],T:[[[1,0],[0,1],[1,1],[2,1]],[[1,0],[1,1],[2,1],[1,2]],[[0,1],[1,1],[2,1],[1,2]],[[1,0],[0,1],[1,1],[1,2]]],S:[[[1,0],[2,0],[0,1],[1,1]],[[1,0],[1,1],[2,1],[2,2]]],Z:[[[0,0],[1,0],[1,1],[2,1]],[[2,0],[1,1],[2,1],[1,2]]],J:[[[0,0],[0,1],[1,1],[2,1]],[[1,0],[2,0],[1,1],[1,2]],[[0,1],[1,1],[2,1],[2,2]],[[1,0],[1,1],[0,2],[1,2]]],L:[[[2,0],[0,1],[1,1],[2,1]],[[1,0],[1,1],[1,2],[2,2]],[[0,1],[1,1],[2,1],[0,2]],[[0,0],[1,0],[1,1],[1,2]]]},c=[0,100,300,500,800];function u(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=[...e];for(;n.length<a;)n.push(function(e){var t;let a=Math.floor(e()*i.length);return null!=(t=i[a])?t:"T"}(t));return n}function m(e){var t,a;let n=d[e.kind];return null!=(a=null!=(t=n[e.rotation%n.length])?t:n[0])?a:[]}function h(e,t){var a;let n=(null!=(a=d[e][0])?a:[]).reduce((e,t)=>Math.max(e,t[0]),0);return{kind:e,rotation:0,x:Math.floor((t-(n+1))/2),y:-1}}function f(e,t,a,n){for(let[r,s]of m(t)){var l;let o=t.x+r,i=t.y+s;if(o<0||o>=a||i>=n||i>=0&&(null==(l=e[i])?void 0:l[o]))return!0}return!1}function b(e,t){if(e.gameOver)return e;let[a,...n]=u(e.nextQueue,t,3);if(!a)return{...e,gameOver:!0,active:null};let l=h(a,e.width);return f(e.board,l,e.width,e.height)?{...e,active:null,nextQueue:n,gameOver:!0}:{...e,active:l,nextQueue:n,canHold:!0,clearedLinesLastTurn:0}}function x(e,t){var a,n,l;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=e.active;if(!s)return e;let o=e.board.map(e=>[...e]),i=!1;for(let[t,a]of m(s)){let n=s.x+t,l=s.y+a;if(l<0){i=!0;continue}if(l>=e.height||n<0||n>=e.width)continue;let r=o[l];r&&(r[n]=s.kind)}if(i)return{...e,board:o,active:null,gameOver:!0,canHold:!1};let d=function(e){var t,a;if(0===e.length)return{board:e,clearedRows:0};let n=null!=(a=null==(t=e[0])?void 0:t.length)?a:0,l=e.filter(e=>e.some(e=>null===e)),r=e.length-l.length;return 0===r?{board:e,clearedRows:0}:{board:[...Array.from({length:r},()=>Array.from({length:n},()=>null)),...l],clearedRows:r}}(o),u=e.lines+d.clearedRows,h=1+Math.floor(u/10),f=(a=d.clearedRows,n=e.level,(null!=(l=c[a])?l:0)*Math.max(n,1)),x=2*Math.max(0,r);return b({...e,board:d.board,active:null,canHold:!0,lines:u,level:h,score:e.score+f+x,clearedLinesLastTurn:d.clearedRows},t)}function g(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,n=s[e];return b({mode:e,width:n.width,height:n.height,board:(t=n.width,Array.from({length:n.height},()=>Array.from({length:t},()=>null))),active:null,hold:null,canHold:!0,nextQueue:u([],a,3),score:0,lines:0,level:1,gameOver:!1,clearedLinesLastTurn:0},a)}function p(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.random;if(!e.active||e.gameOver)return e;let l={...e.active,x:e.active.x+t,y:e.active.y+a};return f(e.board,l,e.width,e.height)?1!==a?e:x(e,n):{...e,active:l,clearedLinesLastTurn:0}}function v(e){if(!e.active||e.gameOver)return e;let t=d[e.active.kind],a=(e.active.rotation+1)%t.length;for(let t of[0,-1,1,-2,2]){let n={...e.active,rotation:a,x:e.active.x+t};if(!f(e.board,n,e.width,e.height))return{...e,active:n,clearedLinesLastTurn:0}}return e}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,a=e.active;if(!a||e.gameOver)return e;let n=a.y;for(;!f(e.board,{...a,y:n+1},e.width,e.height);)n+=1;return x({...e,active:{...a,y:n}},t,n-a.y)}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random;if(!e.active||e.gameOver||!e.canHold)return e;let a=e.active;if(!e.hold)return{...b({...e,hold:a.kind,active:null,canHold:!1},t),canHold:!1};let n=h(e.hold,e.width);return f(e.board,n,e.width,e.height)?{...e,gameOver:!0,active:null,hold:a.kind,canHold:!1}:{...e,active:n,hold:a.kind,canHold:!1,clearedLinesLastTurn:0}}var w=null!=(l=null==(n=a(2946).env.NEXT_PUBLIC_MISC_BACKEND_URL)?void 0:n.replace(/\/$/,""))?l:"http://localhost:4000";async function N(e){let t=await e.json().catch(()=>null);if(!e.ok){let e="object"==typeof t&&t&&"message"in t?t.message:"Request failed";throw Error(null!=e?e:"Request failed")}return t}async function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=new URLSearchParams({mode:e,limit:String(t)});return N(await fetch("".concat(w,"/api/v1/scores?").concat(a.toString()),{cache:"no-store"})).then(e=>e.scores)}async function k(e){return N(await fetch("".concat(w,"/api/v1/scores"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).then(e=>e.score)}async function O(e){return N(await fetch("".concat(w,"/api/v1/challenges"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).then(e=>e.challenge)}async function C(e){return N(await fetch("".concat(w,"/api/v1/challenges/").concat(e),{cache:"no-store"})).then(e=>e.challenge)}var P=a(8765);function _(e){let t=e.trim();return t?t.slice(0,24):"guest"}function L(e){var t;let{locale:a,challengeId:n}=e,[l,i]=(0,r.useState)("classic"),[d,c]=(0,r.useState)(()=>g("classic")),[u,h]=(0,r.useState)(!0),[f,b]=(0,r.useState)(()=>Date.now()),[x,w]=(0,r.useState)("guest"),[N,L]=(0,r.useState)([]),[M,R]=(0,r.useState)(!0),[T,A]=(0,r.useState)(null),[E,D]=(0,r.useState)(null),[I,H]=(0,r.useState)(!1),[B,U]=(0,r.useState)(!1),[J,Q]=(0,r.useState)(!1),[W,q]=(0,r.useState)(null),F=(0,r.useMemo)(()=>(function(e){let t=e.board.map(e=>[...e]);if(!e.active)return t;for(let[a,n]of m(e.active)){let l=e.active.x+a,r=e.active.y+n;if(r<0||r>=e.height||l<0||l>=e.width)continue;let s=t[r];s&&(s[l]=e.active.kind)}return t})(d),[d]),V=(0,r.useCallback)(async e=>{R(!0),A(null);try{let t=await S(e,10);L(t)}catch(e){A(e instanceof Error?e.message:"Failed to load leaderboard")}finally{R(!1)}},[L]);(0,r.useEffect)(()=>{V(l)},[V,l]),(0,r.useEffect)(()=>{let e=!1;return async function(){if(!n)return q(null);try{let t=await C(n);if(e)return;q(t),i(e=>e===t.mode?e:t.mode)}catch(t){e||D(t instanceof Error?t.message:"Challenge could not be loaded")}}(),()=>{e=!0}},[n]),(0,r.useEffect)(()=>{c(g(l)),b(Date.now()),Q(!1),D(null),h(!0)},[l]),(0,r.useEffect)(()=>{d.gameOver&&h(!1)},[d.gameOver]),(0,r.useEffect)(()=>{var e,t;if(!u||d.gameOver)return;let a=window.setInterval(()=>{c(e=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random;return p(e,0,1,t)})(e))},(e=d.mode,t=d.level,Math.max(120,s[e].baseDropIntervalMs-(t-1)*45)));return()=>{window.clearInterval(a)}},[d.gameOver,d.level,d.mode,u]),(0,r.useEffect)(()=>{function e(e){if(u&&!d.gameOver)switch(["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"," ","c","C"].includes(e.key)&&e.preventDefault(),e.key){case"ArrowLeft":c(e=>p(e,-1,0));break;case"ArrowRight":c(e=>p(e,1,0));break;case"ArrowDown":c(e=>p(e,0,1));break;case"ArrowUp":c(e=>v(e));break;case" ":c(e=>y(e));break;case"c":case"C":c(e=>j(e));break;case"p":case"P":h(e=>!e)}}return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[d.gameOver,u]);let Z=(0,r.useCallback)(()=>{c(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random;return g(e,t)}(l)),b(Date.now()),Q(!1),D(null),h(!0)},[l]),G=(0,r.useCallback)(async()=>{if(d.gameOver&&!J&&!I){H(!0);try{await k({nickname:_(x),mode:d.mode,score:d.score,lines:d.lines,durationMs:Date.now()-f}),Q(!0),D("Score submitted to leaderboard."),await V(d.mode)}catch(e){D(e instanceof Error?e.message:"Score submission failed")}finally{H(!1)}}},[d,x,f,J,I,V]),X=(0,r.useCallback)(async()=>{if(!B&&!(d.score<=0)){U(!0);try{let e=await O({nickname:_(x),mode:d.mode,score:d.score}),t="".concat(window.location.origin,"/").concat(a,"/play?challenge=").concat(e.id),n="I scored ".concat(d.score," in ").concat(s[d.mode].label,". Beat me in Viral Tetris Arena!");"undefined"!=typeof navigator&&"function"==typeof navigator.share?await navigator.share({title:"Viral Tetris Arena Challenge",text:n,url:t}):"undefined"!=typeof navigator&&navigator.clipboard&&await navigator.clipboard.writeText("".concat(n," ").concat(t)),D("Challenge link is ready to share.")}catch(e){D(e instanceof Error?e.message:"Share challenge failed")}finally{U(!1)}}},[d.mode,d.score,a,x,B]),z=d.nextQueue.slice(0,3),K=d.gameOver||!u;return(0,P.jsx)("main",{className:"min-h-screen bg-[radial-gradient(circle_at_top,#172554_0%,#020617_65%)] p-4 text-slate-100 sm:p-8",children:(0,P.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-4 lg:flex-row",children:[(0,P.jsxs)("section",{className:"flex-1 rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4 shadow-xl backdrop-blur",children:[(0,P.jsxs)("header",{className:"mb-4 flex flex-wrap items-center justify-between gap-3",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h1",{className:"text-2xl font-bold sm:text-3xl",children:"Viral Tetris Arena"}),(0,P.jsx)("p",{className:"text-sm text-slate-300",children:"Classic + Wide Rush + Share Challenge loop"})]}),(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[(0,P.jsx)("button",{type:"button",onClick:()=>i("classic"),"data-testid":"mode-classic",className:"rounded-md px-3 py-1 text-sm font-semibold ".concat("classic"===l?"bg-cyan-500 text-slate-950":"bg-slate-700 text-slate-200"),children:"Classic"}),(0,P.jsx)("button",{type:"button",onClick:()=>i("wide"),"data-testid":"mode-wide",className:"rounded-md px-3 py-1 text-sm font-semibold ".concat("wide"===l?"bg-emerald-400 text-slate-950":"bg-slate-700 text-slate-200"),children:"Wide Rush"})]})]}),W?(0,P.jsxs)("div",{"data-testid":"challenge-banner",className:"mb-4 rounded-lg border border-emerald-400/40 bg-emerald-500/10 p-3 text-sm",children:[(0,P.jsx)("p",{className:"font-semibold text-emerald-300",children:"Challenge loaded"}),(0,P.jsxs)("p",{className:"text-emerald-100",children:[W.nickname," scored ",W.score,". Beat this in ",s[W.mode].label,"."]})]}):null,(0,P.jsx)("div",{className:"overflow-x-auto rounded-lg border border-slate-700 bg-slate-950/70 p-2",children:(0,P.jsx)("div",{"data-testid":"tetris-board-grid",className:"mx-auto grid w-fit gap-1",style:{gridTemplateColumns:"repeat(".concat(d.width,", minmax(0, 1fr))")},children:F.map((e,t)=>e.map((e,a)=>{let n=e?o[e]:"rgba(15,23,42,0.7)";return(0,P.jsx)("div",{className:"".concat("wide"===l?"h-5 w-5 sm:h-6 sm:w-6":"h-6 w-6 sm:h-7 sm:w-7"," rounded-[4px] border border-slate-800"),style:{backgroundColor:n}},"".concat(t,"-").concat(a))}))})}),(0,P.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-2 text-xs sm:text-sm",children:[(0,P.jsx)("button",{type:"button",onClick:()=>c(e=>p(e,-1,0)),disabled:K,className:"rounded bg-slate-700 px-2 py-2 font-semibold disabled:opacity-40",children:"Left"}),(0,P.jsx)("button",{type:"button",onClick:()=>c(e=>v(e)),disabled:K,className:"rounded bg-slate-700 px-2 py-2 font-semibold disabled:opacity-40",children:"Rotate"}),(0,P.jsx)("button",{type:"button",onClick:()=>c(e=>p(e,1,0)),disabled:K,className:"rounded bg-slate-700 px-2 py-2 font-semibold disabled:opacity-40",children:"Right"}),(0,P.jsx)("button",{type:"button",onClick:()=>c(e=>p(e,0,1)),disabled:K,className:"rounded bg-slate-700 px-2 py-2 font-semibold disabled:opacity-40",children:"Down"}),(0,P.jsx)("button",{type:"button",onClick:()=>c(e=>y(e)),disabled:K,className:"rounded bg-slate-700 px-2 py-2 font-semibold disabled:opacity-40",children:"Drop"}),(0,P.jsx)("button",{type:"button",onClick:()=>c(e=>j(e)),disabled:K,className:"rounded bg-slate-700 px-2 py-2 font-semibold disabled:opacity-40",children:"Hold"})]})]}),(0,P.jsxs)("aside",{className:"w-full max-w-full space-y-4 lg:w-96",children:[(0,P.jsxs)("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4",children:[(0,P.jsx)("h2",{className:"text-lg font-semibold",children:"Run Stats"}),(0,P.jsxs)("dl",{className:"mt-3 grid grid-cols-2 gap-3 text-sm",children:[(0,P.jsxs)("div",{className:"rounded bg-slate-800/80 p-2",children:[(0,P.jsx)("dt",{className:"text-slate-300",children:"Mode"}),(0,P.jsx)("dd",{"data-testid":"runstat-mode-value",className:"text-base font-semibold",children:s[l].label})]}),(0,P.jsxs)("div",{className:"rounded bg-slate-800/80 p-2",children:[(0,P.jsx)("dt",{className:"text-slate-300",children:"Score"}),(0,P.jsx)("dd",{className:"text-base font-semibold",children:d.score})]}),(0,P.jsxs)("div",{className:"rounded bg-slate-800/80 p-2",children:[(0,P.jsx)("dt",{className:"text-slate-300",children:"Lines"}),(0,P.jsx)("dd",{className:"text-base font-semibold",children:d.lines})]}),(0,P.jsxs)("div",{className:"rounded bg-slate-800/80 p-2",children:[(0,P.jsx)("dt",{className:"text-slate-300",children:"Level"}),(0,P.jsx)("dd",{className:"text-base font-semibold",children:d.level})]}),(0,P.jsxs)("div",{className:"rounded bg-slate-800/80 p-2",children:[(0,P.jsx)("dt",{className:"text-slate-300",children:"Round Time"}),(0,P.jsx)("dd",{className:"text-base font-semibold",children:function(e){let t=Math.max(0,Math.floor(e/1e3)),a=Math.floor(t/60).toString().padStart(2,"0"),n=(t%60).toString().padStart(2,"0");return"".concat(a,":").concat(n)}(Date.now()-f)})]}),(0,P.jsxs)("div",{className:"rounded bg-slate-800/80 p-2",children:[(0,P.jsx)("dt",{className:"text-slate-300",children:"Hold"}),(0,P.jsx)("dd",{className:"text-base font-semibold",children:null!=(t=d.hold)?t:"-"})]})]}),(0,P.jsxs)("div",{className:"mt-3 rounded bg-slate-800/80 p-2 text-sm",children:[(0,P.jsx)("p",{className:"text-slate-300",children:"Next"}),(0,P.jsx)("div",{className:"mt-1 flex flex-wrap gap-2",children:z.length>0?z.map((e,t)=>(0,P.jsx)("span",{className:"rounded px-2 py-1 text-xs font-semibold",style:{backgroundColor:o[e],color:"#020617"},children:e},"".concat(e,"-").concat(t))):(0,P.jsx)("span",{children:"-"})})]}),(0,P.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,P.jsx)("button",{type:"button",onClick:()=>h(e=>!e),className:"rounded bg-indigo-500 px-3 py-2 text-sm font-semibold text-slate-950",children:u?"Pause":"Resume"}),(0,P.jsx)("button",{type:"button",onClick:Z,className:"rounded bg-slate-200 px-3 py-2 text-sm font-semibold text-slate-900",children:"Restart"})]})]}),(0,P.jsxs)("section",{className:"rounded-2xl border border-emerald-400/40 bg-emerald-500/10 p-4",children:[(0,P.jsx)("h2",{className:"text-lg font-semibold text-emerald-200",children:"Share + Leaderboard"}),(0,P.jsx)("p",{className:"mt-1 text-sm text-emerald-100",children:"Share your score to challenge friends and bring new players."}),(0,P.jsxs)("label",{className:"mt-3 block text-sm",children:["Nickname",(0,P.jsx)("input",{value:x,onChange:e=>w(e.target.value),maxLength:24,className:"mt-1 w-full rounded border border-emerald-300/40 bg-slate-950/70 px-3 py-2 text-sm text-slate-100"})]}),(0,P.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,P.jsx)("button",{type:"button",onClick:G,"data-testid":"submit-score",disabled:!d.gameOver||J||I,className:"rounded bg-emerald-300 px-3 py-2 text-sm font-semibold text-slate-950 disabled:opacity-40",children:I?"Submitting...":J?"Submitted":"Submit Score"}),(0,P.jsx)("button",{type:"button",onClick:X,"data-testid":"share-challenge",disabled:B||d.score<=0,className:"rounded bg-cyan-300 px-3 py-2 text-sm font-semibold text-slate-950 disabled:opacity-40",children:B?"Sharing...":"Share Challenge"})]}),E?(0,P.jsx)("p",{className:"mt-2 text-sm text-emerald-100",children:E}):null]}),(0,P.jsxs)("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4",children:[(0,P.jsxs)("h2",{className:"text-lg font-semibold",children:["Leaderboard (",s[l].label,")"]}),M?(0,P.jsx)("p",{className:"mt-2 text-sm text-slate-300",children:"Loading..."}):null,T?(0,P.jsx)("p",{className:"mt-2 text-sm text-rose-300",children:T}):null,M||0!==N.length?null:(0,P.jsx)("p",{className:"mt-2 text-sm text-slate-300",children:"No scores yet. Be the first."}),(0,P.jsx)("ol",{className:"mt-3 space-y-2",children:N.map((e,t)=>(0,P.jsxs)("li",{"data-testid":"leaderboard-item",className:"flex items-center justify-between rounded bg-slate-800/80 px-3 py-2 text-sm",children:[(0,P.jsxs)("span",{"data-testid":"leaderboard-item-label",children:["#",t+1," ",e.nickname]}),(0,P.jsx)("span",{"data-testid":"leaderboard-item-score",className:"font-semibold",children:e.score})]},e.id))})]}),(0,P.jsxs)("section",{className:"rounded-2xl border border-amber-400/40 bg-amber-500/10 p-4",children:[(0,P.jsx)("h2",{className:"text-lg font-semibold text-amber-200",children:"Sponsored"}),(0,P.jsx)("p",{className:"mt-2 text-sm text-amber-100",children:"Reserved ad slot for MVP. Start with low frequency placement after game over to avoid retention drop."}),(0,P.jsx)("div",{className:"mt-3 rounded border border-amber-300/40 bg-slate-950/70 p-4 text-center text-sm text-amber-100",children:"Ad Slot 320x100"})]})]})]})})}},3086:(e,t,a)=>{"use strict";function n(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return n}}),a(8765),a(1052),a(1253),a(1068)},3342:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return n}});let n=(0,a(128).createAsyncLocalStorage)()},3988:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let n=a(2664)._(a(2292));function l(e,t){var a;let l={};"function"==typeof e&&(l.loader=e);let r={...l,...t};return(0,n.default)({...r,modules:null==(a=r.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5296:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(8765);a(2449);var l=(0,a(6847).default)(()=>a.e(832).then(a.bind(a,8832)).then(e=>e.TetrisPlayScreen),{loadableGenerated:{webpack:()=>[require.resolveWeak("./TetrisPlayScreen-J3I5BFYS.js")]},loading:()=>(0,n.jsx)("div",{className:"flex min-h-[60vh] items-center justify-center bg-slate-950 text-slate-100",children:"Loading game engine..."})}),r=a(5438),s=a(9401);function o(){var e;let{locale:t}=(0,r.useParams)(),a=null!=(e=(0,r.useSearchParams)().get("challenge"))?e:void 0;return(0,n.jsx)(l,{locale:null!=t?t:"en_US",challengeId:a})}function i(){return(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)(l,{locale:"en_US"}),children:(0,n.jsx)(o,{})})}},5438:(e,t,a)=>{"use strict";var n=a(530);a.o(n,"permanentRedirect")&&a.d(t,{permanentRedirect:function(){return n.permanentRedirect}}),a.o(n,"redirect")&&a.d(t,{redirect:function(){return n.redirect}}),a.o(n,"useParams")&&a.d(t,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})},6550:(e,t,a)=>{Promise.resolve().then(a.bind(a,5296))},6835:(e,t,a)=>{"use strict";function n(e){let{reason:t,children:a}=e;return a}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}}),a(9719)},6847:(e,t,a)=>{"use strict";a.d(t,{default:()=>l.a});var n=a(3988),l=a.n(n)}},e=>{e.O(0,[769,359,358],()=>e(e.s=6550)),_N_E=e.O()}]);